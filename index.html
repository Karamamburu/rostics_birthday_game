<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Pac-man</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="/rostics_birthday_game/favicon.ico"
    />
    <link rel="stylesheet" href="/rostics_birthday_game/styles/style.css" />
    <link
      rel="stylesheet"
      href="/rostics_birthday_game/styles/modal-style.css"
    />
    <script
      src="/rostics_birthday_game/app.js"
      charset="utf-8"
      type="module"
    ></script>
  </head>
  <body>
    <div class="helpModalBackground hidden">
      <div class="helpModal">
        <span class="closeHelpModal">&times;</span>
        <h3>Справка по таблице ТОП 100</h3>
        <p>В таблице отображаются 100 лучших, формируемых по определенным правилам.</p>
        <p>Что можно делать:</p>
        <ul>
          <li>Фильтровать результаты по уровню сложности с помощью табов.</li>
          <li>Просматривать статистику других игроков.</li>
          <li>Сравнивать свои результаты с коллегами.</li>
        </ul>
        <p>Что можно получить:</p>
        <ul>
          <li>Значок ROSTIC'S GAMER - за победу на любом уровне сложности.</li>
          <li>Награду ROSTIC'S GAME WINNER - за победу на уровне сложности HELL.</li>
        </ul>
        <p>В таблицу попадает по одному лучшему результату от каждого игрока на каждом уровне сложности.</p>
        <p>Правила определения места победителя в общей рейтинговой таблице:</p>
        <ol>
          <li>По количеству съеденных калорий ↓ - чем больше, тем выше в таблице.</li>
          <li>По уровню сложности (HELL → NIGHTMARE → NORMAL) - чем сложнее, тем выше в таблице.</li>
          <li>По времени, затраченному на попытку ↑ - чем быстрее, тем выше в таблице.</li>
          <li>По количеству движений, сделанных персонажем ↑ - чем меньше, тем выше в таблице.</li>
        </ol>
      </div>
    </div>
    <div class="gameEndModalBackground hidden">
      <div class="gameEndModal">
        <span class="closeModal">&times;</span>
        <h3 class="resultTitle"></h3>
        <img class="resultImage" src="" alt="Result image">
        <p class="resultText">Ты занял <span class="resultNumber">0</span> место 
          в общем зачёте, съев <span class="resultScore">0</span> калорий 
          за <span class="resultTime">0</span> 
          на уровне сложности <span class="resultDifficulty">0</span>!</p>
        <button class="restartGameButton">Restart</button>
      </div>
    </div>
    <div class="modalBackground">
      <div class="modalActive">
        <div class="modalContainer">
          <div class="ratingContainer">
            <h3>ТOП 100 игроков <span class="help-icon">?</span></h3>
            <div class="difficulty-tabs">
              <button class="tab-button active" data-difficulty="all">Все</button>
              <button class="tab-button" data-difficulty="normal">Normal</button>
              <button class="tab-button" data-difficulty="nightmare">Nightmare</button>
              <button class="tab-button" data-difficulty="hell">Hell</button>
            </div>
            <div class="table-container">
				<table class="ratingTable">
				  <thead>
					<tr>
					  <th>#</th>
					  <th>Имя</th>
            <th>Должность</th>
					  <th>Подразделение</th>
					  <th>Компания</th>
            <th>Уровень сложности</th>
					  <th>Балл</th>
					  <th>Время</th>
					  <th>Сделано шагов</th>
					  <th>Победа</th>
					</tr>
				  </thead>
				  <tbody></tbody>
				</table>
			</div>
          </div>
          <div class="modalContent">
            <div class="modalWindow">
              <h3>
                Привет, <%=curUser.firstname%>! </br>
				Отпразднуй день рождения Rostic's вместе с нами, установив рекорд в нашей новой игре!
              </h3>
              <p>Выбери уровень сложности</p>
              <div class="buttons">
                <button
                  class="difficulty-button normal-button"
                  data-difficulty="normal"
                >
                  Normal
                </button>
                <button
                  class="difficulty-button nightmare-button"
                  data-difficulty="nightmare"
                >
                  Nightmare
                </button>
                <button
                  class="difficulty-button hell-button"
                  data-difficulty="hell"
                >
                  Hell
                </button>
              </div>
              <p>Твоя задача собрать все вкусняшки на карте и не столкнуться с дудликами! Удачи!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flex">
      <div class="grid"></div>
      <div class="toolbar">
        <button class="restart-button hidden">Restart</button>
        <p class="selected-difficulty"></p>
        <h3>Счётчик калорий: <span id="score"></span></h3>
        <h3>Время: <span id="timer">0:00</span></h3>
        <div class="talking-den"></div>
      </div>	
	  <div class="content pixel-help">
  <div class="pixel-border">
    <h2 class="pixel-title" style="text-align: center">/// УПРАВЛЕНИЕ ///</h2>
    
    <div class="pixel-row">
      <span class="pixel-arrow">↑ </span>
      <span class="pixel-text">Вверх</span>
      <span class="pixel-key"> (W)</span>
    </div>
    
    <div class="pixel-row">
      <span class="pixel-arrow">↓ </span>
      <span class="pixel-text">Вниз</span>
      <span class="pixel-key"> (S)</span>
    </div>
    
    <div class="pixel-row">
      <span class="pixel-arrow">← </span>
      <span class="pixel-text">Влево</span>
      <span class="pixel-key"> (A)</span>
    </div>
    
    <div class="pixel-row">
      <span class="pixel-arrow">→ </span>
      <span class="pixel-text">Вправо</span>
      <span class="pixel-key"> (D)</span>
    </div>
    
    <div class="pixel-rules">
      <h2 class="pixel-title" style="text-align: center">/// ПРАВИЛА ///</h2>
      <ul class="pixel-list">
        <li>Съешь <img src="/rostics_birthday_game/assets/images/chicken.png" class="pixel-small"> - 40 очков</li>
        <li> Собери все хиты Rostic's <img src="/rostics_birthday_game/assets/images/pho_bo.png" class="pixel-small">, за каждый - 160 очков</li>
        <li>Избегай дудлов <img src="/rostics_birthday_game/assets/images/ghosts/apple.png" class="pixel-small">, они заобнимают тебя до смерти!</li>
      </ul>
    </div>
    <div class="sound-control">
      <button id="soundToggle" class="sound-button">
        <img src="/rostics_birthday_game/assets/images/sound_on.png" alt="Sound" id="soundIcon">
      </button>
    </div>
  </div>
</div>
    </div>
    <div class="loader-overlay" id="loader">
      <div class="loader"></div>
      <p class="loader-text">Загружаем игру...</p>
    </div>
<style>
  .loader-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }

  .loader {
    border: 5px solid rgba(255, 255, 255, 0.3);
    border-top: 5px solid #A020C2;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    margin-bottom: 15px;
  }

  .loader-text {
    color: white;
    font-size: 1.2em;
    font-family: 'MercutioNbpSmallcaps', Arial, Helvetica, sans-serif;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  .sound-control {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}

  .sound-button {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
  }

  .sound-button img {
      width: 32px;
      height: 32px;
  }
  .gameEndModalBackground {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .gameEndModal {
    background-color: #1a1a2e;
    padding: 20px;
    border-radius: 10px;
    width: 400px;
    max-width: 90%;
    text-align: center;
    position: relative;
  }

  .gameEndModal h3 {
    color: #fff;
    font-size: 2.5em;
    margin-bottom: 20px;
  }

  .resultImage {
    width: 200px;
    height: 200px;
    margin: 0 auto 20px;
    display: block;
  }

  .resultText {
    color: white;
    font-size: 1.2em;
    margin-bottom: 20px;
    font-weight: normal;
  }

  span#timer {
    font-family: 'MercutioNbpSmallcaps', Arial, Helvetica, sans-serif;
  }

  .resultNumber, 
  .resultScore, 
  .resultTime, 
  .resultDifficulty,
  .help-icon {
    color: #fff;
    font-weight: bold;
    font-family: 'MercutioNbpSmallcaps', Arial, Helvetica, sans-serif;
  }

  .restartGameButton {
    background-color: #fff;
    color: #1a1a2e;
    border: none;
    padding: 10px 20px;
    font-size: 1.2em;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
  }

  .restartGameButton:hover {
    background-color: #A020C2;
    transform: scale(1.05);
  }

  .closeModal {
    position: absolute;
    top: 10px;
    right: 15px;
    color: #fff;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }

  .closeModal:hover {
    color: #A020C2;
  }

  .hidden {
  display: none !important;
  }

  .help-icon {
    display: inline-block;
    width: 20px;
    height: 20px;
    background-color: #A020C2;
    color: white;
    border-radius: 50%;
    text-align: center;
    line-height: 20px;
    font-size: 16px;
    margin-left: 10px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .help-icon:hover {
    background-color: #702090;
    transform: scale(1.1);
  }

  .helpModalBackground {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1001;
  }

  .helpModal {
    background-color: #1a1a2e;
    padding: 20px;
    border-radius: 10px;
    width: 400px;
    max-width: 90%;
    position: relative;
  }

  .helpModal h3 {
    color: #fff;
    margin-bottom: 15px;
    font-size: 1.5em;
    margin-bottom: 15px;
  }

  .helpModal p, .helpModal ul {
    color: white;
    margin-bottom: 10px;
  }

  .helpModal ul {
    padding-left: 20px;
    padding-left: 20px;
    list-style-type: disc;
  }

  .helpModal li {
    margin-bottom: 5px;
  }

  .closeHelpModal {
    position: absolute;
    top: 10px;
    right: 15px;
    color: #fff;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }

  .helpModal,
  .helpModal div,
  .helpModal p,
  .helpModal h3,
  .helpModal ul,
  .helpModal li,
  .helpModal span:not(.closeHelpModal) {
    font-family: Arial, Helvetica, sans-serif !important;
    color: white !important;
    font-weight: normal !important;
  }

  .closeHelpModal:hover {
    color: #A020C2;
  }
</style>
  </body>
</html>